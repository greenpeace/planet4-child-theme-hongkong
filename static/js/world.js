!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=27)}([,,function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},,function(t,n,e){"use strict";n.a=function(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}},,,function(t,n,e){"use strict";e.r(n),function(t){var r=e(4),i=setTimeout;function o(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function a(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn(function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void s(n.promise,t)}c(n.promise,r)}else(1===t._state?c:s)(n.promise,t._value)})):t._deferreds.push(n)}function c(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof u)return t._state=3,t._value=n,void l(t);if("function"==typeof e)return void h((r=e,i=n,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=n,l(t)}catch(n){s(t,n)}var r,i}function s(t,n){t._state=2,t._value=n,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&u._immediateFn(function(){t._handled||u._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)a(t,t._deferreds[n]);t._deferreds=null}function f(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function h(t,n){var e=!1;try{t(function(t){e||(e=!0,c(n,t))},function(t){e||(e=!0,s(n,t))})}catch(t){if(e)return;e=!0,s(n,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,n){var e=new this.constructor(o);return a(this,new f(t,n,e)),e},u.prototype.finally=r.a,u.all=function(t){return new u(function(n,e){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);var i=r.length;function o(t,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(n){o(t,n)},e)}r[t]=u,0==--i&&n(r)}catch(t){e(t)}}for(var u=0;u<r.length;u++)o(u,r[u])})},u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u(function(n){n(t)})},u.reject=function(t){return new u(function(n,e){e(t)})},u.race=function(t){return new u(function(n,e){for(var r=0,i=t.length;r<i;r++)t[r].then(n,e)})},u._immediateFn="function"==typeof t&&function(n){t(n)}||function(t){i(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n.default=u}.call(this,e(8).setImmediate)},function(t,n,e){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,n){this._id=t,this._clearFn=n}n.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},n.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},e(9),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,e(2))},function(t,n,e){(function(t,n){!function(t,e){"use strict";if(!t.setImmediate){var r,i,o,u,a,c=1,s={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){n.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var n=!0,e=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage("","*"),t.onmessage=e,n}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(t){var n=f.createElement("script");n.onreadystatechange=function(){d(t),n.onreadystatechange=null,i.removeChild(n),n=null},i.appendChild(n)}):r=function(t){setTimeout(d,0,t)}:(u="setImmediate$"+Math.random()+"$",a=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(u)&&d(+n.data.slice(u.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(n){t.postMessage(u+n,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),e=0;e<n.length;e++)n[e]=arguments[e+1];var i={callback:t,args:n};return s[c]=i,r(c),c++},h.clearImmediate=p}function p(t){delete s[t]}function d(t){if(l)setTimeout(d,0,t);else{var n=s[t];if(n){l=!0;try{!function(t){var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(e,r)}}(n)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,e(2),e(10))},function(t,n){var e,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var c,s=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var n=s.length;n;){for(c=s,s=[];++f<n;)c&&c[f].run();f=-1,n=s.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(n){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function v(){}i.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];s.push(new d(t,n)),1!==s.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,,,,,,,function(t,n,e){"use strict";(function(t){}).call(this,e(7))},,,,,,,,,function(t,n,e){t.exports=e(28)},function(t,n,e){"use strict";e.r(n);var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},o=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),i.hasOwnProperty(n)?{space:i[n],local:t}:t};var u=function(t){var n=o(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===r&&n.documentElement.namespaceURI===r?n.createElement(t):n.createElementNS(e,t)}})(n)};function a(){}var c=function(t){return null==t?a:function(){return this.querySelector(t)}};function s(){return[]}var l=function(t){return new Array(t.length)};function f(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}f.prototype={constructor:f,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var h="$";function p(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new f(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function d(t,n,e,r,i,o,u){var a,c,s,l={},p=n.length,d=o.length,v=new Array(p);for(a=0;a<p;++a)(c=n[a])&&(v[a]=s=h+u.call(c,c.__data__,a,n),s in l?i[a]=c:l[s]=c);for(a=0;a<d;++a)(c=l[s=h+u.call(t,o[a],a,o)])?(r[a]=c,c.__data__=o[a],l[s]=null):e[a]=new f(t,o[a]);for(a=0;a<p;++a)(c=n[a])&&l[v[a]]===c&&(i[a]=c)}function v(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var g=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function m(t){return t.trim().split(/^|\s+/)}function y(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=m(t.getAttribute("class")||"")}function w(t,n){for(var e=y(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function x(t,n){for(var e=y(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function E(){this.textContent=""}function b(){this.innerHTML=""}function S(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function T(){return null}function A(){var t=this.parentNode;t&&t.removeChild(this)}function j(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function k(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var P={},C=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(P={mouseenter:"mouseover",mouseleave:"mouseout"}));function N(t,n,e){return t=O(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function O(t,n,e){return function(r){var i=C;C=r;try{t.call(this,this.__data__,n,e)}finally{C=i}}}function I(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function L(t,n,e){var r=P.hasOwnProperty(t.type)?N:O;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var l=0,f=c.length;l<f;++l)if((a=c[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function R(t,n,e,r){var i=C;t.sourceEvent=C,C=t;try{return n.apply(e,r)}finally{C=i}}function D(t,n,e){var r=g(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var F=[null];function X(t,n){this._groups=t,this._parents=n}function U(){return new X([[document.documentElement]],F)}X.prototype=U.prototype={constructor:X,select:function(t){"function"!=typeof t&&(t=c(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],s=a.length,l=r[i]=new Array(s),f=0;f<s;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u);return new X(r,this._parents)},selectAll:function(t){var n;"function"!=typeof t&&(t=null==(n=t)?s:function(){return this.querySelectorAll(n)});for(var e=this._groups,r=e.length,i=[],o=[],u=0;u<r;++u)for(var a,c=e[u],l=c.length,f=0;f<l;++f)(a=c[f])&&(i.push(t.call(a,a.__data__,f,c)),o.push(a));return new X(i,o)},filter:function(t){var n;"function"!=typeof t&&(n=t,t=function(){return this.matches(n)});for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var u,a=e[o],c=a.length,s=i[o]=[],l=0;l<c;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new X(i,this._parents)},data:function(t,n){if(!t)return g=new Array(this.size()),l=-1,this.each(function(t){g[++l]=t}),g;var e,r=n?d:p,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),c=new Array(u),s=new Array(u),l=0;l<u;++l){var f=i[l],h=o[l],v=h.length,g=t.call(f,f&&f.__data__,l,i),m=g.length,y=c[l]=new Array(m),_=a[l]=new Array(m);r(f,h,y,_,s[l]=new Array(v),g,n);for(var w,x,E=0,b=0;E<m;++E)if(w=y[E]){for(E>=b&&(b=E+1);!(x=_[b])&&++b<m;);w._next=x||null}}return(a=new X(a,i))._enter=c,a._exit=s,a},enter:function(){return new X(this._enter||this._groups.map(l),this._parents)},exit:function(){return new X(this._exit||this._groups.map(l),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],l=e[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new X(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=v);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],c=a.length,s=i[o]=new Array(c),l=0;l<c;++l)(u=a[l])&&(s[l]=u);s.sort(n)}return new X(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=o(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):function(t,n){return t.style.getPropertyValue(n)||g(t).getComputedStyle(t,null).getPropertyValue(n)}(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=m(t+"");if(arguments.length<2){for(var r=y(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?w:x)(this,t)}}:n?function(t){return function(){w(this,t)}}:function(t){return function(){x(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?E:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?b:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(S)},lower:function(){return this.each(M)},append:function(t){var n="function"==typeof t?t:u(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:u(t),r=null==n?T:"function"==typeof n?n:c(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A)},clone:function(t){return this.select(t?k:j)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?L:I,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,l=a.length;s<l;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return D(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return D(this,t,n)}})(t,n))}};var q=function(t){return"string"==typeof t?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],F)},B=0;function z(){this._="@"+(++B).toString(36)}z.prototype=function(){return new z}.prototype={constructor:z,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var G=function(){for(var t,n=C;t=n.sourceEvent;)n=t;return n},Q=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},V=function(t){var n=G();return n.changedTouches&&(n=n.changedTouches[0]),Q(t,n)},H=function(t,n,e){arguments.length<3&&(e=n,n=G().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Q(t,r);return null},W={value:function(){}};function Y(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Z(r)}function Z(t){this._=t}function $(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function J(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=W,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Z.prototype=Y.prototype={constructor:Z,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),u=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<a;)if(e=(t=o[u]).type)i[e]=J(i[e],t.name,n);else if(null==n)for(e in i)i[e]=J(i[e],t.name,null);return this}for(;++u<a;)if((e=(t=o[u]).type)&&(e=$(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Z(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var K=Y;function tt(){C.stopImmediatePropagation()}var nt=function(){C.preventDefault(),C.stopImmediatePropagation()},et=function(t){var n=t.document.documentElement,e=q(t).on("dragstart.drag",nt,!0);"onselectstart"in n?e.on("selectstart.drag",nt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")};var rt=function(t){return function(){return t}};function it(t,n,e,r,i,o,u,a,c,s){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=c,this._=s}function ot(){return!C.button}function ut(){return this.parentNode}function at(t){return null==t?{x:C.x,y:C.y}:t}function ct(){return"ontouchstart"in this}it.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var st={},lt={},ft=34,ht=10,pt=13;function dt(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function vt(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function gt(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function mt(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+gt(-n,6):n>9999?"+"+gt(n,6):gt(n,4))+"-"+gt(t.getUTCMonth()+1,2)+"-"+gt(t.getUTCDate(),2)+(o?"T"+gt(e,2)+":"+gt(r,2)+":"+gt(i,2)+"."+gt(o,3)+"Z":i?"T"+gt(e,2)+":"+gt(r,2)+":"+gt(i,2)+"Z":r||e?"T"+gt(e,2)+":"+gt(r,2)+"Z":"")}var yt=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,u=0,a=0,c=o<=0,s=!1;function l(){if(c)return lt;if(s)return s=!1,st;var n,r,i=u;if(t.charCodeAt(i)===ft){for(;u++<o&&t.charCodeAt(u)!==ft||t.charCodeAt(++u)===ft;);return(n=u)>=o?c=!0:(r=t.charCodeAt(u++))===ht?s=!0:r===pt&&(s=!0,t.charCodeAt(u)===ht&&++u),t.slice(i+1,n-1).replace(/""/g,'"')}for(;u<o;){if((r=t.charCodeAt(n=u++))===ht)s=!0;else if(r===pt)s=!0,t.charCodeAt(u)===ht&&++u;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===ht&&--o,t.charCodeAt(o-1)===pt&&--o;(r=l())!==lt;){for(var f=[];r!==st&&r!==lt;)f.push(r),r=l();n&&null==(f=n(f,a++))||i.push(f)}return i}function i(n,e){return n.map(function(n){return e.map(function(t){return u(n[t])}).join(t)})}function o(n){return n.map(u).join(t)}function u(t){return null==t?"":t instanceof Date?mt(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=dt(t);return function(r,i){return n(e(r),i,t)}}(t,n):dt(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=vt(n)),[e.map(u).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=vt(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}},_t=yt(","),wt=_t.parse,xt=(_t.parseRows,_t.format,_t.formatBody,_t.formatRows,yt("\t")),Et=xt.parse;xt.parseRows,xt.format,xt.formatBody,xt.formatRows;function bt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var St=function(t,n){return fetch(t,n).then(bt)};function Mt(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),St(n,e).then(function(n){return t(n,r)})}}Mt(wt),Mt(Et),e(18);function Tt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function At(t){return function(n,e){return St(n,e).then(function(n){return(new DOMParser).parseFromString(n,t)})}}At("application/xml"),At("text/html"),At("image/svg+xml");var jt,kt,Pt=0,Ct=0,Nt=0,Ot=1e3,It=0,Lt=0,Rt=0,Dt="object"==typeof performance&&performance.now?performance:Date,Ft="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xt(){return Lt||(Ft(Ut),Lt=Dt.now()+Rt)}function Ut(){Lt=0}function qt(){this._call=this._time=this._next=null}function Bt(t,n,e){var r=new qt;return r.restart(t,n,e),r}function zt(){Lt=(It=Dt.now())+Rt,Pt=Ct=0;try{!function(){Xt(),++Pt;for(var t,n=jt;n;)(t=Lt-n._time)>=0&&n._call.call(null,t),n=n._next;--Pt}()}finally{Pt=0,function(){var t,n,e=jt,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:jt=n);kt=t,Qt(r)}(),Lt=0}}function Gt(){var t=Dt.now(),n=t-It;n>Ot&&(Rt-=n,It=t)}function Qt(t){Pt||(Ct&&(Ct=clearTimeout(Ct)),t-Lt>24?(t<1/0&&(Ct=setTimeout(zt,t-Dt.now()-Rt)),Nt&&(Nt=clearInterval(Nt))):(Nt||(It=Dt.now(),Nt=setInterval(Gt,Ot)),Pt=1,Ft(zt)))}qt.prototype=Bt.prototype={constructor:qt,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Xt():+e)+(null==n?0:+n),this._next||kt===this||(kt?kt._next=this:jt=this,kt=this),this._call=t,this._time=e,Qt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qt())}};var Vt=function(){return new Ht};function Ht(){this.reset()}Ht.prototype={constructor:Ht,reset:function(){this.s=this.t=0},add:function(t){Yt(Wt,t,this.t),Yt(this,Wt.s,this.s),this.s?this.t+=Wt.t:this.s=Wt.t},valueOf:function(){return this.s}};var Wt=new Ht;function Yt(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var Zt=1e-6,$t=1e-12,Jt=Math.PI,Kt=Jt/2,tn=Jt/4,nn=2*Jt,en=180/Jt,rn=Jt/180,on=Math.abs,un=Math.atan,an=Math.atan2,cn=Math.cos,sn=Math.ceil,ln=Math.exp,fn=(Math.floor,Math.log),hn=(Math.pow,Math.sin),pn=Math.sign||function(t){return t>0?1:t<0?-1:0},dn=Math.sqrt,vn=Math.tan;function gn(t){return t>1?0:t<-1?Jt:Math.acos(t)}function mn(t){return t>1?Kt:t<-1?-Kt:Math.asin(t)}function yn(){}function _n(t,n){t&&xn.hasOwnProperty(t.type)&&xn[t.type](t,n)}var wn={Feature:function(t,n){_n(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)_n(e[r].geometry,n)}},xn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){En(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)En(e[r],n,0)},Polygon:function(t,n){bn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)bn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)_n(e[r],n)}};function En(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function bn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)En(t[e],n,1);n.polygonEnd()}var Sn=function(t,n){t&&wn.hasOwnProperty(t.type)?wn[t.type](t,n):_n(t,n)};Vt(),Vt();function Mn(t){return[an(t[1],t[0]),mn(t[2])]}function Tn(t){var n=t[0],e=t[1],r=cn(e);return[r*cn(n),r*hn(n),hn(e)]}function An(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function jn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function kn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Pn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Cn(t){var n=dn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}Vt();var Nn=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};function On(t,n){return[on(t)>Jt?t+Math.round(-t/nn)*nn:t,n]}function In(t,n,e){return(t%=nn)?n||e?Nn(Rn(t),Dn(n,e)):Rn(t):n||e?Dn(n,e):On}function Ln(t){return function(n,e){return[(n+=t)>Jt?n-nn:n<-Jt?n+nn:n,e]}}function Rn(t){var n=Ln(t);return n.invert=Ln(-t),n}function Dn(t,n){var e=cn(t),r=hn(t),i=cn(n),o=hn(n);function u(t,n){var u=cn(n),a=cn(t)*u,c=hn(t)*u,s=hn(n),l=s*e+a*r;return[an(c*i-l*o,a*e-s*r),mn(l*i+c*o)]}return u.invert=function(t,n){var u=cn(n),a=cn(t)*u,c=hn(t)*u,s=hn(n),l=s*i-c*o;return[an(c*i+s*o,a*e+l*r),mn(l*e-a*r)]},u}On.invert=On;function Fn(t,n,e,r,i,o){if(e){var u=cn(n),a=hn(n),c=r*e;null==i?(i=n+r*nn,o=n-c/2):(i=Xn(u,i),o=Xn(u,o),(r>0?i<o:i>o)&&(i+=r*nn));for(var s,l=i;r>0?l>o:l<o;l-=c)s=Mn([u,-a*cn(l),-a*hn(l)]),t.point(s[0],s[1])}}function Xn(t,n){(n=Tn(n))[0]-=t,Cn(n);var e=gn(-n[1]);return((-n[2]<0?-e:e)+nn-Zt)%nn}var Un=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:yn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},qn=function(t,n){return on(t[0]-n[0])<Zt&&on(t[1]-n[1])<Zt};function Bn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}var zn=function(t,n,e,r,i){var o,u,a=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(qn(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(e=new Bn(r,t,null,!0)),c.push(e.o=new Bn(r,null,e,!1)),a.push(e=new Bn(u,t,null,!1)),c.push(e.o=new Bn(u,null,e,!0))}}),a.length){for(c.sort(n),Gn(a),Gn(c),o=0,u=c.length;o<u;++o)c[o].e=e=!e;for(var s,l,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((l=s[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((l=s[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}};function Gn(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}var Qn=Vt();function Vn(t){return on(t[0])<=Jt?t[0]:pn(t[0])*((on(t[0])+Jt)%nn-Jt)}var Hn=function(t,n){var e=Vn(n),r=n[1],i=hn(r),o=[hn(e),-cn(e),0],u=0,a=0;Qn.reset(),1===i?r=Kt+Zt:-1===i&&(r=-Kt-Zt);for(var c=0,s=t.length;c<s;++c)if(f=(l=t[c]).length)for(var l,f,h=l[f-1],p=Vn(h),d=h[1]/2+tn,v=hn(d),g=cn(d),m=0;m<f;++m,p=_,v=x,g=E,h=y){var y=l[m],_=Vn(y),w=y[1]/2+tn,x=hn(w),E=cn(w),b=_-p,S=b>=0?1:-1,M=S*b,T=M>Jt,A=v*x;if(Qn.add(an(A*S*hn(M),g*E+A*cn(M))),u+=T?b+S*nn:b,T^p>=e^_>=e){var j=jn(Tn(h),Tn(y));Cn(j);var k=jn(o,j);Cn(k);var P=(T^b>=0?-1:1)*mn(k[2]);(r>P||r===P&&(j[0]||j[1]))&&(a+=T^b>=0?1:-1)}}return(u<-Zt||u<Zt&&Qn<-Zt)^1&a},Wn=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN};var Yn,Zn;1===(Yn=Wn).length&&(Zn=Yn,Yn=function(t,n){return Wn(Zn(t),n)});var $n=Array.prototype,Jn=($n.slice,$n.map,function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Kn=function(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--u]=r[n];return e};var te=function(t,n,e,r){return function(i){var o,u,a,c=n(i),s=Un(),l=n(s),f=!1,h={point:p,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=_,u=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=v,h.lineEnd=g,u=Kn(u);var t=Hn(o,r);u.length?(f||(i.polygonStart(),f=!0),zn(u,ee,t,e,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),u=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(n,e){t(n,e)&&i.point(n,e)}function d(t,n){c.point(t,n)}function v(){h.point=d,c.lineStart()}function g(){h.point=p,c.lineEnd()}function m(t,n){a.push([t,n]),l.point(t,n)}function y(){l.lineStart(),a=[]}function _(){m(a[0][0],a[0][1]),l.lineEnd();var t,n,e,r,c=l.clean(),h=s.result(),p=h.length;if(a.pop(),o.push(a),a=null,p)if(1&c){if((n=(e=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else p>1&&2&c&&h.push(h.pop().concat(h.shift())),u.push(h.filter(ne))}return h}};function ne(t){return t.length>1}function ee(t,n){return((t=t.x)[0]<0?t[1]-Kt-Zt:Kt-t[1])-((n=n.x)[0]<0?n[1]-Kt-Zt:Kt-n[1])}var re=te(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?Jt:-Jt,c=on(o-e);on(c-Jt)<Zt?(t.point(e,r=(r+u)/2>0?Kt:-Kt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&c>=Jt&&(on(e-i)<Zt&&(e-=i*Zt),on(o-a)<Zt&&(o-=a*Zt),r=function(t,n,e,r){var i,o,u=hn(t-e);return on(u)>Zt?un((hn(n)*(o=cn(r))*hn(e)-hn(r)*(i=cn(n))*hn(t))/(i*o*u)):(n+r)/2}(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*Kt,r.point(-Jt,i),r.point(0,i),r.point(Jt,i),r.point(Jt,0),r.point(Jt,-i),r.point(0,-i),r.point(-Jt,-i),r.point(-Jt,0),r.point(-Jt,i);else if(on(t[0]-n[0])>Zt){var o=t[0]<n[0]?Jt:-Jt;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-Jt,-Kt]);var ie=function(t){var n=cn(t),e=6*rn,r=n>0,i=on(n)>Zt;function o(t,e){return cn(t)*cn(e)>n}function u(t,e,r){var i=[1,0,0],o=jn(Tn(t),Tn(e)),u=An(o,o),a=o[0],c=u-a*a;if(!c)return!r&&t;var s=n*u/c,l=-n*a/c,f=jn(i,o),h=Pn(i,s);kn(h,Pn(o,l));var p=f,d=An(h,p),v=An(p,p),g=d*d-v*(An(h,h)-1);if(!(g<0)){var m=dn(g),y=Pn(p,(-d-m)/v);if(kn(y,h),y=Mn(y),!r)return y;var _,w=t[0],x=e[0],E=t[1],b=e[1];x<w&&(_=w,w=x,x=_);var S=x-w,M=on(S-Jt)<Zt;if(!M&&b<E&&(_=E,E=b,b=_),M||S<Zt?M?E+b>0^y[1]<(on(y[0]-w)<Zt?E:b):E<=y[1]&&y[1]<=b:S>Jt^(w<=y[0]&&y[0]<=x)){var T=Pn(p,(-d+m)/v);return kn(T,h),[y,Mn(T)]}}}function a(n,e){var i=r?t:Jt-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return te(o,function(t){var n,e,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var p,d=[f,h],v=o(f,h),g=r?v?0:a(f,h):v?a(f+(f<0?Jt:-Jt),h):0;if(!n&&(s=c=v)&&t.lineStart(),v!==c&&(!(p=u(n,d))||qn(n,p)||qn(d,p))&&(d[0]+=Zt,d[1]+=Zt,v=o(d[0],d[1])),v!==c)l=0,v?(t.lineStart(),p=u(d,n),t.point(p[0],p[1])):(p=u(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(i&&n&&r^v){var m;g&e||!(m=u(d,n,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||n&&qn(n,d)||t.point(d[0],d[1]),n=d,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return l|(s&&c)<<1}}},function(n,r,i,o){Fn(o,t,e,i,n,r)},r?[0,-t]:[-Jt,t-Jt])},oe=function(t,n,e,r,i,o){var u,a=t[0],c=t[1],s=0,l=1,f=n[0]-a,h=n[1]-c;if(u=e-a,f||!(u>0)){if(u/=f,f<0){if(u<s)return;u<l&&(l=u)}else if(f>0){if(u>l)return;u>s&&(s=u)}if(u=i-a,f||!(u<0)){if(u/=f,f<0){if(u>l)return;u>s&&(s=u)}else if(f>0){if(u<s)return;u<l&&(l=u)}if(u=r-c,h||!(u>0)){if(u/=h,h<0){if(u<s)return;u<l&&(l=u)}else if(h>0){if(u>l)return;u>s&&(s=u)}if(u=o-c,h||!(u<0)){if(u/=h,h<0){if(u>l)return;u>s&&(s=u)}else if(h>0){if(u<s)return;u<l&&(l=u)}return s>0&&(t[0]=a+s*f,t[1]=c+s*h),l<1&&(n[0]=a+l*f,n[1]=c+l*h),!0}}}}},ue=1e9,ae=-ue;function ce(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var l=0,f=0;if(null==i||(l=u(i,a))!==(f=u(o,a))||c(i,o)<0^a>0)do{s.point(0===l||3===l?t:e,l>1?r:n)}while((l=(l+a+4)%4)!==f);else s.point(o[0],o[1])}function u(r,i){return on(r[0]-t)<Zt?i>0?0:3:on(r[0]-e)<Zt?i>0?2:1:on(r[1]-n)<Zt?i>0?1:0:i>0?3:2}function a(t,n){return c(t.x,n.x)}function c(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){var c,s,l,f,h,p,d,v,g,m,y,_=u,w=Un(),x={point:E,lineStart:function(){x.point=b,s&&s.push(l=[]);m=!0,g=!1,d=v=NaN},lineEnd:function(){c&&(b(f,h),p&&g&&w.rejoin(),c.push(w.result()));x.point=E,g&&_.lineEnd()},polygonStart:function(){_=w,c=[],s=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var o,u,a=s[e],c=1,l=a.length,f=a[0],h=f[0],p=f[1];c<l;++c)o=h,u=p,f=a[c],h=f[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(h-o)*(r-u)<(p-u)*(t-o)&&--n;return n}(),e=y&&n,i=(c=Kn(c)).length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&zn(c,a,n,o,u),u.polygonEnd());_=u,c=s=l=null}};function E(t,n){i(t,n)&&_.point(t,n)}function b(o,u){var a=i(o,u);if(s&&l.push([o,u]),m)f=o,h=u,p=a,m=!1,a&&(_.lineStart(),_.point(o,u));else if(a&&g)_.point(o,u);else{var c=[d=Math.max(ae,Math.min(ue,d)),v=Math.max(ae,Math.min(ue,v))],w=[o=Math.max(ae,Math.min(ue,o)),u=Math.max(ae,Math.min(ue,u))];oe(c,w,t,n,e,r)?(g||(_.lineStart(),_.point(c[0],c[1])),_.point(w[0],w[1]),a||_.lineEnd(),y=!1):a&&(_.lineStart(),_.point(o,u),y=!1)}d=o,v=u,g=a}return x}}Vt();function se(t,n,e){var r=Jn(t,n-Zt,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function le(t,n,e){var r=Jn(t,n-Zt,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function fe(){var t,n,e,r,i,o,u,a,c,s,l,f,h=10,p=h,d=90,v=360,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return Jn(sn(r/d)*d,e,d).map(l).concat(Jn(sn(a/v)*v,u,v).map(f)).concat(Jn(sn(n/h)*h,t,h).filter(function(t){return on(t%d)>Zt}).map(c)).concat(Jn(sn(o/p)*p,i,p).filter(function(t){return on(t%v)>Zt}).map(s))}return m.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(u).slice(1),l(e).reverse().slice(1),f(a).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],u=+t[1][1],r>e&&(t=r,r=e,e=t),a>u&&(t=a,a=u,u=t),m.precision(g)):[[r,a],[e,u]]},m.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),m.precision(g)):[[n,o],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(d=+t[0],v=+t[1],m):[d,v]},m.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],m):[h,p]},m.precision=function(h){return arguments.length?(g=+h,c=se(o,i,90),s=le(n,t,g),l=se(a,u,90),f=le(r,e,g),m):g},m.extentMajor([[-180,-90+Zt],[180,90-Zt]]).extentMinor([[-180,-80-Zt],[180,80+Zt]])}var he,pe,de,ve,ge=function(t){return t},me=Vt(),ye=Vt(),_e={point:yn,lineStart:yn,lineEnd:yn,polygonStart:function(){_e.lineStart=we,_e.lineEnd=be},polygonEnd:function(){_e.lineStart=_e.lineEnd=_e.point=yn,me.add(on(ye)),ye.reset()},result:function(){var t=me/2;return me.reset(),t}};function we(){_e.point=xe}function xe(t,n){_e.point=Ee,he=de=t,pe=ve=n}function Ee(t,n){ye.add(ve*t-de*n),de=t,ve=n}function be(){Ee(he,pe)}var Se=_e,Me=1/0,Te=Me,Ae=-Me,je=Ae;var ke,Pe,Ce,Ne,Oe={point:function(t,n){t<Me&&(Me=t);t>Ae&&(Ae=t);n<Te&&(Te=n);n>je&&(je=n)},lineStart:yn,lineEnd:yn,polygonStart:yn,polygonEnd:yn,result:function(){var t=[[Me,Te],[Ae,je]];return Ae=je=-(Te=Me=1/0),t}},Ie=0,Le=0,Re=0,De=0,Fe=0,Xe=0,Ue=0,qe=0,Be=0,ze={point:Ge,lineStart:Qe,lineEnd:We,polygonStart:function(){ze.lineStart=Ye,ze.lineEnd=Ze},polygonEnd:function(){ze.point=Ge,ze.lineStart=Qe,ze.lineEnd=We},result:function(){var t=Be?[Ue/Be,qe/Be]:Xe?[De/Xe,Fe/Xe]:Re?[Ie/Re,Le/Re]:[NaN,NaN];return Ie=Le=Re=De=Fe=Xe=Ue=qe=Be=0,t}};function Ge(t,n){Ie+=t,Le+=n,++Re}function Qe(){ze.point=Ve}function Ve(t,n){ze.point=He,Ge(Ce=t,Ne=n)}function He(t,n){var e=t-Ce,r=n-Ne,i=dn(e*e+r*r);De+=i*(Ce+t)/2,Fe+=i*(Ne+n)/2,Xe+=i,Ge(Ce=t,Ne=n)}function We(){ze.point=Ge}function Ye(){ze.point=$e}function Ze(){Je(ke,Pe)}function $e(t,n){ze.point=Je,Ge(ke=Ce=t,Pe=Ne=n)}function Je(t,n){var e=t-Ce,r=n-Ne,i=dn(e*e+r*r);De+=i*(Ce+t)/2,Fe+=i*(Ne+n)/2,Xe+=i,Ue+=(i=Ne*t-Ce*n)*(Ce+t),qe+=i*(Ne+n),Be+=3*i,Ge(Ce=t,Ne=n)}var Ke=ze;function tr(t){this._context=t}tr.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,nn)}},result:yn};var nr,er,rr,ir,or,ur=Vt(),ar={point:yn,lineStart:function(){ar.point=cr},lineEnd:function(){nr&&sr(er,rr),ar.point=yn},polygonStart:function(){nr=!0},polygonEnd:function(){nr=null},result:function(){var t=+ur;return ur.reset(),t}};function cr(t,n){ar.point=sr,er=ir=t,rr=or=n}function sr(t,n){ir-=t,or-=n,ur.add(dn(ir*ir+or*or)),ir=t,or=n}var lr=ar;function fr(){this._string=[]}function hr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}fr.prototype={_radius:4.5,_circle:hr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=hr(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};function pr(t){return function(n){var e=new dr;for(var r in t)e[r]=t[r];return e.stream=n,e}}function dr(){}function vr(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Sn(e,t.stream(Oe)),n(Oe.result()),null!=r&&t.clipExtent(r),t}function gr(t,n,e){return vr(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])},e)}function mr(t,n,e){return gr(t,[[0,0],n],e)}function yr(t,n,e){return vr(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])},e)}function _r(t,n,e){return vr(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])},e)}dr.prototype={constructor:dr,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wr=16,xr=cn(30*rn),Er=function(t,n){return+n?function(t,n){function e(r,i,o,u,a,c,s,l,f,h,p,d,v,g){var m=s-r,y=l-i,_=m*m+y*y;if(_>4*n&&v--){var w=u+h,x=a+p,E=c+d,b=dn(w*w+x*x+E*E),S=mn(E/=b),M=on(on(E)-1)<Zt||on(o-f)<Zt?(o+f)/2:an(x,w),T=t(M,S),A=T[0],j=T[1],k=A-r,P=j-i,C=y*k-m*P;(C*C/_>n||on((m*k+y*P)/_-.5)>.3||u*h+a*p+c*d<xr)&&(e(r,i,o,u,a,c,A,j,M,w/=b,x/=b,E,v,g),g.point(A,j),e(A,j,M,w,x,E,s,l,f,h,p,d,v,g))}}return function(n){var r,i,o,u,a,c,s,l,f,h,p,d,v={point:g,lineStart:m,lineEnd:_,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=m}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function m(){l=NaN,v.point=y,n.lineStart()}function y(r,i){var o=Tn([r,i]),u=t(r,i);e(l,f,s,h,p,d,l=u[0],f=u[1],s=r,h=o[0],p=o[1],d=o[2],wr,n),n.point(l,f)}function _(){v.point=g,n.lineEnd()}function w(){m(),v.point=x,v.lineEnd=E}function x(t,n){y(r=t,n),i=l,o=f,u=h,a=p,c=d,v.point=y}function E(){e(l,f,s,h,p,d,i,o,r,u,a,c,wr,n),v.lineEnd=_,_()}return v}}(t,n):function(t){return pr({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)};var br=pr({point:function(t,n){this.stream.point(t*rn,n*rn)}});function Sr(t,n,e,r){var i=cn(r),o=hn(r),u=i*t,a=o*t,c=i/t,s=o/t,l=(o*e-i*n)/t,f=(o*n+i*e)/t;function h(t,r){return[u*t-a*r+n,e-a*t-u*r]}return h.invert=function(t,n){return[c*t-s*n+l,f-s*t-c*n]},h}function Mr(t){return Tr(function(){return t})()}function Tr(t){var n,e,r,i,o,u,a,c,s,l,f=150,h=480,p=250,d=0,v=0,g=0,m=0,y=0,_=0,w=null,x=re,E=null,b=ge,S=.5;function M(t){return c(t[0]*rn,t[1]*rn)}function T(t){return(t=c.invert(t[0],t[1]))&&[t[0]*en,t[1]*en]}function A(){var t=Sr(f,0,0,_).apply(null,n(d,v)),r=(_?Sr:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(f,h-t[0],p-t[1],_);return e=In(g,m,y),a=Nn(n,r),c=Nn(e,a),u=Er(a,S),j()}function j(){return s=l=null,M}return M.stream=function(t){return s&&l===t?s:s=br(function(t){return pr({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(x(u(b(l=t)))))},M.preclip=function(t){return arguments.length?(x=t,w=void 0,j()):x},M.postclip=function(t){return arguments.length?(b=t,E=r=i=o=null,j()):b},M.clipAngle=function(t){return arguments.length?(x=+t?ie(w=t*rn):(w=null,re),j()):w*en},M.clipExtent=function(t){return arguments.length?(b=null==t?(E=r=i=o=null,ge):ce(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),j()):null==E?null:[[E,r],[i,o]]},M.scale=function(t){return arguments.length?(f=+t,A()):f},M.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],A()):[h,p]},M.center=function(t){return arguments.length?(d=t[0]%360*rn,v=t[1]%360*rn,A()):[d*en,v*en]},M.rotate=function(t){return arguments.length?(g=t[0]%360*rn,m=t[1]%360*rn,y=t.length>2?t[2]%360*rn:0,A()):[g*en,m*en,y*en]},M.angle=function(t){return arguments.length?(_=t%360*rn,A()):_*en},M.precision=function(t){return arguments.length?(u=Er(a,S=t*t),j()):dn(S)},M.fitExtent=function(t,n){return gr(M,t,n)},M.fitSize=function(t,n){return mr(M,t,n)},M.fitWidth=function(t,n){return yr(M,t,n)},M.fitHeight=function(t,n){return _r(M,t,n)},function(){return n=t.apply(this,arguments),M.invert=n.invert&&T,A()}}function Ar(t){return function(n,e){var r=cn(n),i=cn(e),o=t(r*i);return[o*i*hn(n),o*hn(e)]}}function jr(t){return function(n,e){var r=dn(n*n+e*e),i=t(r),o=hn(i),u=cn(i);return[an(n*o,r*u),mn(r&&e*o/r)]}}var kr=Ar(function(t){return dn(2/(1+t))});kr.invert=jr(function(t){return 2*mn(t/2)});var Pr=Ar(function(t){return(t=gn(t))&&t/hn(t)});Pr.invert=jr(function(t){return t});function Cr(t,n){return[t,fn(vn((Kt+n)/2))]}Cr.invert=function(t,n){return[t,2*un(ln(n))-Kt]};function Nr(t,n){return[t,n]}Nr.invert=Nr;var Or=1.340264,Ir=-.081106,Lr=893e-6,Rr=.003796,Dr=dn(3)/2;function Fr(t,n){var e=mn(Dr*hn(n)),r=e*e,i=r*r*r;return[t*cn(e)/(Dr*(Or+3*Ir*r+i*(7*Lr+9*Rr*r))),e*(Or+Ir*r+i*(Lr+Rr*r))]}Fr.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,u=0;u<12&&(o=(i=(r-=e=(r*(Or+Ir*i+o*(Lr+Rr*i))-n)/(Or+3*Ir*i+o*(7*Lr+9*Rr*i)))*r)*i*i,!(on(e)<$t));++u);return[Dr*t*(Or+3*Ir*i+o*(7*Lr+9*Rr*i))/cn(r),mn(hn(r)/Dr)]};function Xr(t,n){var e=cn(n),r=cn(t)*e;return[e*hn(t)/r,hn(n)/r]}Xr.invert=jr(un);function Ur(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}Ur.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,u=o*o;r-=e=(r*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-n)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(on(e)>Zt&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function qr(t,n){return[cn(n)*hn(t),hn(n)]}qr.invert=jr(mn);function Br(t,n){var e=cn(n),r=1+cn(t)*e;return[e*hn(t)/r,hn(n)/r]}Br.invert=jr(function(t){return 2*un(t)});function zr(t,n){return[fn(vn((Kt+n)/2)),-t]}zr.invert=function(t,n){return[-n,2*un(ln(t))-Kt]};var Gr=function(t){return t},Qr=function(t){if(null==t)return Gr;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(t,a){a||(n=e=0);var c=2,s=t.length,l=new Array(s);for(l[0]=(n+=t[0])*r+o,l[1]=(e+=t[1])*i+u;c<s;)l[c]=t[c],++c;return l}},Vr=function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e},Hr=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return Wr(t,n)})}:Wr(t,n)};function Wr(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=Yr(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function Yr(t,n){var e=Qr(t.transform),r=t.arcs;function i(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],o=0,u=i.length;o<u;++o)n.push(e(i[o],o));t<0&&Vr(n,u)}function o(t){return e(t)}function u(t){for(var n=[],e=0,r=t.length;e<r;++e)i(t[e],n);return n.length<2&&n.push(n[0]),n}function a(t){for(var n=u(t);n.length<4;)n.push(n[0]);return n}function c(t){return t.map(a)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=o(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(o);break;case"LineString":e=u(n.arcs);break;case"MultiLineString":e=n.arcs.map(u);break;case"Polygon":e=c(n.arcs);break;case"MultiPolygon":e=n.arcs.map(c);break;default:return null}return{type:r,coordinates:e}}(n)}var Zr=function(t,n){var e={},r={},i={},o=[],u=-1;function a(t,n){for(var r in t){var i=t[r];delete n[i.start],delete i.start,delete i.end,i.forEach(function(t){e[t<0?~t:t]=1}),o.push(i)}}return n.forEach(function(e,r){var i,o=t.arcs[e<0?~e:e];o.length<3&&!o[1][0]&&!o[1][1]&&(i=n[++u],n[u]=e,n[r]=i)}),n.forEach(function(n){var e,o,u=function(n){var e,r=t.arcs[n<0?~n:n],i=r[0];t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1];return n<0?[e,i]:[i,e]}(n),a=u[0],c=u[1];if(e=i[a])if(delete i[e.end],e.push(n),e.end=c,o=r[c]){delete r[o.start];var s=o===e?e:e.concat(o);r[s.start=e.start]=i[s.end=o.end]=s}else r[e.start]=i[e.end]=e;else if(e=r[c])if(delete r[e.start],e.unshift(n),e.start=a,o=i[a]){delete i[o.end];var l=o===e?e:o.concat(e);r[l.start=o.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else r[(e=[n]).start=a]=i[e.end=c]=e}),a(i,r),a(r,i),n.forEach(function(t){e[t<0?~t:t]||o.push([t])}),o},$r=function(t){return Yr(t,function(t,n,e){var r,i,o;if(arguments.length>1)r=function(t,n,e){var r,i=[],o=[];function u(t){var n=t<0?~t:t;(o[n]||(o[n]=[])).push({i:t,g:r})}function a(t){t.forEach(u)}function c(t){t.forEach(a)}return function t(n){switch(r=n,n.type){case"GeometryCollection":n.geometries.forEach(t);break;case"LineString":a(n.arcs);break;case"MultiLineString":case"Polygon":c(n.arcs);break;case"MultiPolygon":!function(t){t.forEach(c)}(n.arcs)}}(n),o.forEach(null==e?function(t){i.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,n,e);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Zr(t,r)}}.apply(this,arguments))};var Jr=new ArrayBuffer(16);new Float64Array(Jr),new Uint32Array(Jr);Math.PI,Math.abs,Math.atan2,Math.cos,Math.sin;var Kr={select:q,get event(){return C},drag:function(){var t,n,e,r,i=ot,o=ut,u=at,a=ct,c={},s=K("start","drag","end"),l=0,f=0;function h(t){t.on("mousedown.drag",p).filter(a).on("touchstart.drag",g).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!r&&i.apply(this,arguments)){var u=_("mouse",o.apply(this,arguments),V,this,arguments);u&&(q(C.view).on("mousemove.drag",d,!0).on("mouseup.drag",v,!0),et(C.view),tt(),e=!1,t=C.clientX,n=C.clientY,u("start"))}}function d(){if(nt(),!e){var r=C.clientX-t,i=C.clientY-n;e=r*r+i*i>f}c.mouse("drag")}function v(){var t,n,r,i;q(C.view).on("mousemove.drag mouseup.drag",null),t=C.view,n=e,r=t.document.documentElement,i=q(t).on("dragstart.drag",null),n&&(i.on("click.drag",nt,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),nt(),c.mouse("end")}function g(){if(i.apply(this,arguments)){var t,n,e=C.changedTouches,r=o.apply(this,arguments),u=e.length;for(t=0;t<u;++t)(n=_(e[t].identifier,r,H,this,arguments))&&(tt(),n("start"))}}function m(){var t,n,e=C.changedTouches,r=e.length;for(t=0;t<r;++t)(n=c[e[t].identifier])&&(nt(),n("drag"))}function y(){var t,n,e=C.changedTouches,i=e.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=c[e[t].identifier])&&(tt(),n("end"))}function _(t,n,e,r,i){var o,a,f,p=e(n,t),d=s.copy();if(R(new it(h,"beforestart",o,t,l,p[0],p[1],0,0,d),function(){return null!=(C.subject=o=u.apply(r,i))&&(a=o.x-p[0]||0,f=o.y-p[1]||0,!0)}))return function u(s){var v,g=p;switch(s){case"start":c[t]=u,v=l++;break;case"end":delete c[t],--l;case"drag":p=e(n,t),v=l}R(new it(h,s,o,t,v,p[0]+a,p[1]+f,p[0]-g[0],p[1]-g[1],d),d.apply,d,[s,r,i])}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:rt(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:rt(t),h):o},h.subject=function(t){return arguments.length?(u="function"==typeof t?t:rt(t),h):u},h.touchable=function(t){return arguments.length?(a="function"==typeof t?t:rt(!!t),h):a},h.on=function(){var t=s.on.apply(s,arguments);return t===s?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h},json:function(t,n){return fetch(t,n).then(Tt)},timer:Bt,geoGraticule:fe,geoOrthographic:function(){return Mr(qr).scale(249.5).clipAngle(90+Zt)},geoPath:function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Sn(t,e(r))),r.result()}return o.area=function(t){return Sn(t,e(Se)),Se.result()},o.measure=function(t){return Sn(t,e(lr)),lr.result()},o.bounds=function(t){return Sn(t,e(Oe)),Oe.result()},o.centroid=function(t){return Sn(t,e(Ke)),Ke.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,ge):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new fr):new tr(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)}},ti=new DOMParser,ni=function(t){return function(n){return Math.pow(n,t)}},ei=function(t){return function(n){return 1-Math.abs(Math.pow(n-1,t))}},ri=function(t){return function(n){return n<.5?ni(t)(2*n)/2:ei(t)(2*n-1)/2+.5}},ii={linear:ri(1),easeIn:ni(2),easeOut:ei(2),easeInOut:ri(2),easeInCubic:ni(3),easeOutCubic:ei(3),easeInOutCubic:ri(3),easeInQuart:ni(4),easeOutQuart:ei(4),easeInOutQuart:ri(4),easeInQuint:ni(5),easeOutQuint:ei(5),easeInOutQuint:ri(5)},oi=function(t,n){var e=this;for(var r in this.options={speed:1,incline:-15,startingRotation:0,outline:"#000",land:"#222",sea:"#fff",borders:"#fff",gridOver:"rgba(119, 119, 119, 0.5)",gridUnder:!1,data:"/data/world-110m.json",goToDuration:800,goToEasing:"easeOut"},n)n.hasOwnProperty(r)&&(this.options[r]=n[r]);if(t.tagName){this.width=parseInt(window.getComputedStyle(t).width,10),this.height=this.width,this.speed=this.options.speed,this.incline=this.options.incline,this.start=Date.now(),this.paused=0,this.rotationX=this.rotationXCache=this.options.startingRotation,this.goto=!1,this.sphere={type:"Sphere"},this.land=null,this.borders=null,this.grid=null,this.markers=[];this.projection=Kr.geoOrthographic().scale((this.width-40)/2).translate([this.width/2,(this.height+30)/2]).clipAngle(90).precision(.5),this.graticule=Kr.geoGraticule(),this.canvas=Kr.select(t).append("canvas");var i=this.canvas.node(),o=window.devicePixelRatio;this.context=i.getContext("2d"),i.style.width=this.width+"px",i.style.height=this.height+"px",i.width=this.width*o,i.height=this.height*o,this.context.scale(o,o),this.path=Kr.geoPath().projection(this.projection).context(this.context),this.pointPath=Kr.geoPath().projection(this.projection).pointRadius(function(){return 6}),this.svg=Kr.select(t).append("svg").attr("width",this.width).attr("height",this.height).attr("style","position: absolute; top: 0; left: 0").call(Kr.drag().subject(function(){return{x:2*e.rotationX,y:2*-e.incline}}).on("start",function(){e.paused|=1}).on("drag",function(){e.rotationX=Kr.event.x/2,e.incline=-Kr.event.y/2,e.rotate(e.rotationX,e.incline)}).on("end",function(){e.paused&=-2,e.start=Date.now(),e.rotationXCache=e.rotationX})).append("g"),this.svg.append("rect").attr("class","glbl-overlay").attr("width",this.width).attr("height",this.height).attr("fill","transparent"),Kr.json(this.options.data).then(function(t){e.land=Hr(t,t.objects.land),e.borders=$r(t,t.objects.countries,function(t,n){return t!==n}),e.grid=e.graticule(),e.rotate(e.rotationX,e.incline),Kr.timer(function(){if(e.goto){var t=-e.goto.long,n=-e.goto.lat,r=e.rotationXCache%360-t,i=e.incline%360-n,o=(Date.now()-e.start)/e.options.goToDuration;if(o<1){var u=e.rotationXCache-ii[e.options.goToEasing](o)*r,a=e.incline-ii[e.options.goToEasing](o)*i;e.rotate(u,a)}else e.rotate(t,n),e.rotationXCache=e.rotationX=t,e.incline=n,"function"==typeof e.goto.callback&&e.goto.callback(),e.goto=!1}else if(e.speed){if(e.paused)return;var c=.01*e.speed;e.rotationX=e.rotationXCache+c*(Date.now()-e.start),e.rotate(e.rotationX,e.incline)}})}).catch(function(t){return console.error("Globalicious: "+t)}),this.rotate=function(t,n){this.projection.rotate([t,n]),this.context.clearRect(0,0,this.width,this.height),this.options.outline&&(this.context.beginPath(),this.path(this.sphere),this.context.lineWidth=Math.round(2*this.width)/300,this.context.strokeStyle=this.options.outline,this.context.stroke()),this.options.sea&&(this.context.beginPath(),this.path(this.sphere),this.context.fillStyle=this.options.sea,this.context.fill()),this.options.gridUnder&&(this.context.beginPath(),this.path(this.grid),this.context.lineWidth=.5,this.context.strokeStyle=this.options.gridUnder,this.context.stroke()),this.options.borders&&(this.context.beginPath(),this.path(this.borders),this.context.lineWidth=.5,this.context.strokeStyle=this.options.borders,this.context.stroke()),this.options.land&&(this.context.beginPath(),this.path(this.land),this.context.fillStyle=this.options.land,this.context.fill()),this.options.gridOver&&(this.context.beginPath(),this.path(this.grid),this.context.lineWidth=.5,this.context.strokeStyle=this.options.gridOver,this.context.stroke()),this.svg.selectAll("g.glbl-marker").attr("transform",function(t){var n=e.projection([t[0],t[1]]);return"translate("+n[0]+","+n[1]+")"}).classed("is-hidden",function(t){return null===e.pointPath({type:"Point",coordinates:[t[0],t[1]]})})}}else console.warn("Globalicious: `wrapper` is not an Element")};oi.prototype.pause=function(){this.paused|=4,this.rotationXCache=this.rotationX},oi.prototype.play=function(){this.paused&=-5,this.start=Date.now()},oi.prototype.setSpeed=function(t){this.rotationXCache=this.rotationX,this.start=Date.now(),this.speed=parseInt(t,10)},oi.prototype.goTo=function(t,n,e){this.pause(),this.rotationXCache=this.rotationX,this.start=Date.now(),this.goto={lat:t,long:n,callback:e}},oi.prototype.mark=function(t,n,e,r){var i=this;this.markers.push([n,t,e]),this.svg.selectAll("g.glbl-marker").data(this.markers).enter().append("g").attr("class","glbl-marker").attr("id",function(t){return"glbl-marker_"+t[1].toString().replace(".","")+"_"+t[0].toString().replace(".","")}).each(function(t){var n=Kr.select(this).append("g"),e=ti.parseFromString(t[2],"image/svg+xml"),r=document.importNode(e.documentElement,!0);r.setAttribute("x",-r.getAttribute("width")/2),r.setAttribute("y",-r.getAttribute("height")),n.node().appendChild(r)}).attr("transform",function(t){var n=i.projection([t[0],t[1]]);return"translate("+n[0]+","+n[1]+")"}).on("click",function(){"function"==typeof r&&r.call(this,t,n)})};var ui=oi;document.addEventListener("DOMContentLoaded",function(t){var n=document.getElementById("history-globe");if(n){var e=document.querySelectorAll(".section-history .label-swiper .swiper-slide"),r=document.querySelectorAll(".section-history .maxi-swiper .swiper-slide[data-latitude]"),i=document.querySelectorAll(".section-history .maxi-swiper .swiper-slide[data-longitude]");if(e.length===r.length&&r.length===i.length){var o=document.querySelector(".section-history .maxi-swiper"),u=Array.from(r).map(function(t){return{lat:parseFloat(t.dataset.latitude.trim()),long:parseFloat(t.dataset.longitude.trim())}});window.Earth=new ui(n,{speed:0,incline:10,startingRotation:-120,borders:!1,outline:!1,sea:!1,gridOver:!1,gridUnder:!1,land:"#fff",data:world_vars.templateUrl+"/static/js/world-110m.json",goToDuration:500,goToEasing:"easeOutQuart"}),window.addEventListener("load",function(){o.swiper&&(u.forEach(function(t){window.Earth.mark(t.lat,t.long,'<svg viewBox="0 0 24 24" width="40" height="40" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41"><path fill="#000000" d="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z" /></svg>')}),window.Earth.goTo(u[0].lat-60,u[0].long),o.swiper.on("slideChange",function(){window.Earth.goTo(u[this.activeIndex].lat-60,u[this.activeIndex].long)}))})}else console.warn("World Slideshow: Please make sure to provide latitudes and longitudes for ALL slides")}})}]);